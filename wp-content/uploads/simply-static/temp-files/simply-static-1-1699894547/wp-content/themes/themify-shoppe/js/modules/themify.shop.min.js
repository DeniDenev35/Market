(($,l,o,n,r)=>{"use strict";const a=new Map,e={init(t){this.v=t.v,this.url=t.url,this.jsUrl=t.jsUrl+"wc/",this.cssUrl=this.url+"styles/wc/modules/",this.bodyCl=t.bodyCl,this.sideMenu(),this.wcAjaxInit(),this.events(),this.initProductSlider(),l.on("infiniteloaded",()=>{this.initProductSlider()}),this.initWishlist(),setTimeout(()=>{this.clicks(),this.initThemibox()},1e3),this.bodyCl.contains("single-product")&&this.singleProductSlider(),this.pluginCompatibility()},events(){l.body.on("keyup","input.qty",function(){const t=$(this),i=parseInt(t.attr("max"),10);t.val()>i&&t.val(i)}),l.on("themify_theme_spark",(t,i)=>{this.clickToSpark(t,i)}).on("themiboxloaded",t=>{$.fn.prettyPhoto?($(".thumbnails a[data-rel^='prettyPhoto']",t).prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1}),l.trigger("single_slider_loaded")):this.singleProductSlider(t).then(()=>{l.trigger("single_slider_loaded")})})},clickToSpark(i,e){if(void 0!==r.sparkling_color){(e=e||{}).text||(e.text="ti-shopping-cart");let t=!1;const s=this.url+"images/"+e.text+".svg";Promise.all([l.loadJs(this.jsUrl+"clickspark.min",!!o.clickSpark,"1.0"),(()=>a.has(s)?1:l.fetch(null,"text",{method:"GET",credentials:"omit"},s).then(t=>{const i=r.sparkling_color;"#dcaa2e"!==i&&(t=t.replace("#dcaa2e",i)),a.set(s,"data:image/svg+xml;base64,"+o.btoa(t))}))()]).then(()=>{t||(t=!0,e=Object.assign({duration:300,count:30,speed:8,type:"splash",rotation:0,size:10},e),clickSpark.setParticleImagePath(a.get(s)),clickSpark.setParticleDuration(e.duration),clickSpark.setParticleCount(e.count),clickSpark.setParticleSpeed(e.speed),clickSpark.setAnimationType(e.type),clickSpark.setParticleRotationSpeed(e.rotation),clickSpark.setParticleSize(e.size),clickSpark.fireParticles($(i)))})}},getWishlistCookie(){const e=" "+n.cookie,s=" "+r.wishlist.cookie+"=",l=[];if(0<e.length){let i=e.indexOf(s);if(-1!==i){i+=s.length;let t=e.indexOf(";",i);-1===t&&(t=e.length);const o=JSON.parse(e.substring(i,t));for(let t in o)l.push(o[t])}}return l},initWishlist(){if(void 0!==r.wishlist){const i=this;setTimeout(()=>{const i=n.tfClass("wishlist-button"),e=this.getWishlistCookie(),t=n.querySelector(".wishlist .icon-menu-count"),s=e.length;for(let t=i.length-1;-1<t;--t)i[t].classList.toggle("wishlisted",e.includes(parseInt(i[t].dataset.id)));t&&(t.classList.toggle("wishlist_empty",0===s),t.textContent=s)},1500),i.bodyCl.contains("wishlist-page")&&l.fetch({action:"themify_load_wishlist_page"},"html").then(t=>{n.tfClass("page-content")[0].appendChild(t)}),l.body.on("click.tf_wishlist",".wishlisted,.wishlist-button",function(t){t.preventDefault(),t.stopImmediatePropagation(),l.loadJs(i.jsUrl+"themify.wishlist",null,i.v).then(()=>{l.trigger("themify_wishlist_init",e),l.body.off("click.tf_wishlist"),$(this).click()})})}},singleProductSlider(s){return new Promise((t,i)=>{const e=(s=s||n).tfClass("woocommerce-product-gallery__wrapper")[0];e&&e.tfClass("tf_swiper-container")[0]?l.loadJs(this.jsUrl+"single-slider",null,this.v).then(()=>{l.trigger("themify_theme_product_single_slider",e).then(t)}).catch(i):t()})},initProductSlider(){if(!this.bodyCl.contains("wishlist-page")){const i=n.tfClass("product-slider"),e=l.isTouch?"touchstart":"mouseover",s=this;for(let t=i.length-1;-1<t;--t)!i[t].hasAttribute("data-product-slider")||i[t].classList.contains("slider_attached")||i[t].classList.contains("hovered")||(i[t].tfOn(e,function(){this.classList.contains("hovered")||(this.classList.add("hovered"),l.loadJs(s.jsUrl+"slider",null,s.v).then(()=>{l.trigger("themify_theme_product_slider",[this])}))},{passive:!0,once:!0}).className+=" slider_attached")}},initThemibox(){const i=this;l.body.one("click",".themify-lightbox",function(t){t.preventDefault(),l.loadJs(i.jsUrl+"themibox",null,i.v).then(()=>{l.trigger("themify_theme_themibox_run",[this])})})},clicks(){let i=n.tfClass("reply-review");for(let t=i.length-1;-1<t;--t)i[t].tfOn("click",t=>{t.preventDefault(),$("#respond").slideToggle("slow")});for(let t=(i=n.tfClass("add-reply-js")).length-1;-1<t;--t)i[t].tfOn("click",function(t){t.preventDefault(),$(this).hide(),$("#respond").slideDown("slow"),$("#cancel-comment-reply-link").show()});null!==(i=n.tfId("cancel-comment-reply-link"))&&i.tfOn("click",function(t){t.preventDefault(),$(this).hide(),$("#respond").slideUp(),$(".add-reply-js").show()})},wcAjaxInit(){"undefined"!=typeof wc_add_to_cart_params&&l.loadJs(this.jsUrl+"ajax_to_cart",null,this.v)},sideMenu(){if(null!==n.tfId("slide-cart")){const i=this;let t=!1;l.sideMenu(n.querySelectorAll("#cart-link,#cart-link-mobile-link"),{panel:"#slide-cart",close:"#cart-icon-close",beforeShow(){!1===t&&n.tfId("cart-wrap")&&(this.panelVisible=!0,l.loadCss(i.cssUrl+"basket",null,i.v).then(()=>{t=!0,this.panelVisible=!1,this.showPanel()}))}})}},pluginCompatibility(){if(n.querySelector(".loops-wrapper.products")){const i={wpf_form:"wpf_ajax_success","yit-wcan-container":"yith-wcan-ajax-filtered"};for(let t in i)n.tfClass(t)[0]&&$(n).on(i[t],()=>{this.initProductSlider()})}}};l.on("themify_theme_shop_init",t=>{e.init(t)},!0)})(jQuery,Themify,window,document,themifyScript);